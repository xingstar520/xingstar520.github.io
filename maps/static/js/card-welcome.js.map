{"version":3,"file":"../../../static/js/card-welcome.js","names":["window","IP_CONFIG","API_KEY","BLOG_LOCATION","lng","lat","CACHE_DURATION","HOME_PAGE_ONLY","insertAnnouncementComponent","announcementCards","document","querySelectorAll","length","isHomePage","querySelector","fetchIpInfo","forEach","card","remove","getWelcomeInfoElement","fetchIpData","async","response","fetch","encodeURIComponent","ok","Error","json","showWelcome","data","ip","showErrorMessage","country","prov","city","welcomeInfo","dist","calculateDistance","ipDisplay","formatIpDisplay","pos","formatLocation","style","display","height","innerHTML","generateWelcomeMessage","rad","Math","PI","dLat","dLon","a","sin","cos","round","R","atan2","sqrt","includes","getTimeGreeting","getGreeting","addStyles","createElement","textContent","head","appendChild","checkLocationPermission","localStorage","getItem","saveLocationPermission","permission","setItem","showLocationPermissionDialog","welcomeInfoElement","getElementById","addEventListener","e","target","tagName","action","dataset","handleLocationPermission","showLoadingSpinner","IP_CACHE_KEY","getIpInfoFromCache","cached","timestamp","JSON","parse","Date","now","removeItem","setIpInfoCache","stringify","cachedData","error","console","greetings","province","countryGreeting","provinceGreeting","hour","getHours","message","location","pathname"],"sources":["static/js/card-welcome.js"],"mappings":"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","ignoreList":[],"sourcesContent":["window.IP_CONFIG = {\n\tAPI_KEY: 'nGCZ4lMaQeiypA336PE0iUVNp7', // API密钥 申请地址：https://api.76.al/\n\tBLOG_LOCATION: {\n\t\tlng: 117.66, // 经度\n\t\tlat: 39.66 // 纬度\n\t},\n\tCACHE_DURATION: 1000 * 60 * 60, // 可配置缓存时间(默认1小时)\n\tHOME_PAGE_ONLY: true, // 是否只在首页显示 开启后其它页面将不会显示这个容器\n};\n\nconst insertAnnouncementComponent = () => {\n\t// 获取所有公告卡片\n\tconst announcementCards = document.querySelectorAll('.card-widget.card-announcement');\n\tif (!announcementCards.length) return;\n\n\tif (IP_CONFIG.HOME_PAGE_ONLY && !isHomePage()) {\n\t\tannouncementCards.forEach(card => card.remove());\n\t\treturn;\n\t}\n\t\n\tif (!document.querySelector('#welcome-info')) return;\n\tfetchIpInfo();\n};\n\nconst getWelcomeInfoElement = () => document.querySelector('#welcome-info');\n\nconst fetchIpData = async () => {\n\tconst response = await fetch(`https://api.nsmao.net/api/ip/query?key=${encodeURIComponent(IP_CONFIG.API_KEY)}`);\n\tif (!response.ok) throw new Error('网络响应不正常');\n\treturn await response.json();\n};\n\nconst showWelcome = ({\n\tdata,\n\tip\n}) => {\n\tif (!data) return showErrorMessage();\n\n\tconst {\n\t\tlng,\n\t\tlat,\n\t\tcountry,\n\t\tprov,\n\t\tcity\n\t} = data;\n\tconst welcomeInfo = getWelcomeInfoElement();\n\tif (!welcomeInfo) return;\n\n\tconst dist = calculateDistance(lng, lat);\n\tconst ipDisplay = formatIpDisplay(ip);\n\tconst pos = formatLocation(country, prov, city);\n\n\twelcomeInfo.style.display = 'block';\n\twelcomeInfo.style.height = 'auto';\n\twelcomeInfo.innerHTML = generateWelcomeMessage(pos, dist, ipDisplay, country, prov, city);\n};\n\nconst calculateDistance = (lng, lat) => {\n\tconst R = 6371; // 地球半径(km)\n\tconst rad = Math.PI / 180;\n\tconst dLat = (lat - IP_CONFIG.BLOG_LOCATION.lat) * rad;\n\tconst dLon = (lng - IP_CONFIG.BLOG_LOCATION.lng) * rad;\n\tconst a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n\t\tMath.cos(IP_CONFIG.BLOG_LOCATION.lat * rad) * Math.cos(lat * rad) *\n\t\tMath.sin(dLon / 2) * Math.sin(dLon / 2);\n\n\treturn Math.round(R * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a)));\n};\nconst formatIpDisplay = (ip) => ip.includes(\":\") ? \"<br>好复杂，咱看不懂~(ipv6)\" : ip;\nconst formatLocation = (country, prov, city) => {\n\treturn country ? (country === \"中国\" ? `${prov} ${city}` : country) : '神秘地区';\n};\n\nconst generateWelcomeMessage = (pos, dist, ipDisplay, country, prov, city) => `\n    欢迎来自 <b>${pos}</b> 的小友💖<br>\n    你当前距博主约 <b>${dist}</b> 公里！<br>\n    你的IP地址：<b class=\"ip-address\">${ipDisplay}</b><br>\n    ${getTimeGreeting()}<br>\n    Tip：<b>${getGreeting(country, prov, city)}🍂</b>\n`;\n\nconst addStyles = () => {\n\tconst style = document.createElement('style');\n\tstyle.textContent = `\n        #welcome-info {\n            user-select: none;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            height: 212px;\n            padding: 10px;\n            margin-top: 5px;\n            border-radius: 12px;\n            background-color: var(--anzhiyu-background);\n            outline: 1px solid var(--anzhiyu-card-border);\n        }\n        .loading-spinner {\n            width: 50px;\n            height: 50px;\n            border: 3px solid rgba(0, 0, 0, 0.1);\n            border-radius: 50%;\n            border-top: 3px solid var(--anzhiyu-main);\n            animation: spin 1s linear infinite;\n        }\n        @keyframes spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n        }\n        .ip-address {\n            filter: blur(5px);\n            transition: filter 0.3s ease;\n        }\n        .ip-address:hover {\n            filter: blur(0);\n        }\n        .error-message {\n            color: #ff6565;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            align-items: center;\n        }\n        .error-message p,\n        .permission-dialog p {\n            margin: 0;\n        }\n        .error-icon {\n            font-size: 3rem;\n        }\n        #retry-button {\n            margin: 0 5px;\n            color: var(--anzhiyu-main);\n            transition: transform 0.3s ease;\n        }\n        #retry-button:hover {\n            transform: rotate(180deg);\n        }\n        .permission-dialog {\n            text-align: center;\n        }\n        .permission-dialog button {\n            margin: 10px 5px;\n            padding: 5px 10px;\n            border: none;\n            border-radius: 5px;\n            background-color: var(--anzhiyu-main);\n            color: white;\n            transition: opacity 0.3s ease;\n        }\n        .permission-dialog button:hover {\n            opacity: 0.8;\n        }\n    `;\n\tdocument.head.appendChild(style);\n};\n\n// 位置权限相关函数\nconst checkLocationPermission = () => localStorage.getItem('locationPermission') === 'granted';\nconst saveLocationPermission = (permission) => {\n\tlocalStorage.setItem('locationPermission', permission);\n};\nconst showLocationPermissionDialog = () => {\n\tconst welcomeInfoElement = document.getElementById(\"welcome-info\");\n\twelcomeInfoElement.innerHTML = `\n        <div class=\"permission-dialog\">\n            <div class=\"error-icon\">❓</div>\n            <p>是否允许访问您的位置信息？</p>\n            <button data-action=\"allow\">允许</button>\n            <button data-action=\"deny\">拒绝</button>\n        </div>\n    `;\n\n\twelcomeInfoElement.addEventListener('click', (e) => {\n\t\tif (e.target.tagName === 'BUTTON') {\n\t\t\tconst action = e.target.dataset.action;\n\t\t\tconst permission = action === 'allow' ? 'granted' : 'denied';\n\t\t\thandleLocationPermission(permission);\n\t\t}\n\t});\n};\nconst handleLocationPermission = (permission) => {\n\tsaveLocationPermission(permission);\n\tif (permission === 'granted') {\n\t\tshowLoadingSpinner();\n\t\tfetchIpInfo();\n\t} else {\n\t\tshowErrorMessage('您已拒绝访问位置信息');\n\t}\n};\n\nconst showLoadingSpinner = () => {\n\tconst welcomeInfoElement = document.querySelector(\"#welcome-info\");\n\tif (!welcomeInfoElement) return;\n\twelcomeInfoElement.innerHTML = '<div class=\"loading-spinner\"></div>';\n};\n\nconst IP_CACHE_KEY = 'ip_info_cache';\nconst getIpInfoFromCache = () => {\n\tconst cached = localStorage.getItem(IP_CACHE_KEY);\n\tif (!cached) return null;\n\n\tconst { data, timestamp } = JSON.parse(cached);\n\tif (Date.now() - timestamp > IP_CONFIG.CACHE_DURATION) {\n\t\tlocalStorage.removeItem(IP_CACHE_KEY);\n\t\treturn null;\n\t}\n\treturn data;\n};\nconst setIpInfoCache = (data) => {\n\tlocalStorage.setItem(IP_CACHE_KEY, JSON.stringify({\n\t\tdata,\n\t\ttimestamp: Date.now()\n\t}));\n};\n\nconst fetchIpInfo = async () => {\n\tif (!checkLocationPermission()) {\n\t\tshowLocationPermissionDialog();\n\t\treturn;\n\t}\n\n\tshowLoadingSpinner();\n\n\tconst cachedData = getIpInfoFromCache();\n\tif (cachedData) {\n\t\tshowWelcome(cachedData);\n\t\treturn;\n\t}\n\n\ttry {\n\t\tconst data = await fetchIpData();\n\t\tsetIpInfoCache(data);\n\t\tshowWelcome(data);\n\t} catch (error) {\n\t\tconsole.error('获取IP信息失败:', error);\n\t\tshowErrorMessage();\n\t}\n};\n\nconst greetings = {\n\t\"中国\": {\n\t\t\"北京市\": \"北——京——欢迎你~~~\",\n\t\t\"天津市\": \"讲段相声吧\",\n\t\t\"河北省\": \"山势巍巍成壁垒，天下雄关铁马金戈由此向，无限江山\",\n\t\t\"山西省\": \"展开坐具长三尺，已占山河五百余\",\n\t\t\"内蒙古自治区\": \"天苍苍，野茫茫，风吹草低见牛羊\",\n\t\t\"辽宁省\": \"我想吃烤鸡架！\",\n\t\t\"吉林省\": \"状元阁就是东北烧烤之王\",\n\t\t\"黑龙江省\": \"很喜欢哈尔滨大剧院\",\n\t\t\"上海市\": \"众所周知，中国只有两个城市\",\n\t\t\"江苏省\": {\n\t\t\t\"南京市\": \"这是我挺想去的城市啦\",\n\t\t\t\"苏州市\": \"上有天堂，下有苏杭\",\n\t\t\t\"其他\": \"散装是必须要散装的\"\n\t\t},\n\t\t\"浙江省\": {\n\t\t\t\"杭州市\": \"东风渐绿西湖柳，雁已还人未南归\",\n\t\t\t\"其他\": \"望海楼明照曙霞,护江堤白蹋晴沙\"\n\t\t},\n\t\t\"河南省\": {\n\t\t\t\"郑州市\": \"豫州之域，天地之中\",\n\t\t\t\"信阳市\": \"品信阳毛尖，悟人间芳华\",\n\t\t\t\"南阳市\": \"臣本布衣，躬耕于南阳此南阳非彼南阳！\",\n\t\t\t\"驻马店市\": \"峰峰有奇石，石石挟仙气嵖岈山的花很美哦！\",\n\t\t\t\"开封市\": \"刚正不阿包青天\",\n\t\t\t\"洛阳市\": \"洛阳牡丹甲天下\",\n\t\t\t\"其他\": \"可否带我品尝河南烩面啦？\"\n\t\t},\n\t\t\"安徽省\": \"蚌埠住了，芜湖起飞\",\n\t\t\"福建省\": \"井邑白云间，岩城远带山\",\n\t\t\"江西省\": \"落霞与孤鹜齐飞，秋水共长天一色\",\n\t\t\"山东省\": \"遥望齐州九点烟，一泓海水杯中泻\",\n\t\t\"湖北省\": {\n\t\t\t\"黄冈市\": \"红安将军县！辈出将才！\",\n\t\t\t\"其他\": \"来碗热干面~\"\n\t\t},\n\t\t\"湖南省\": \"74751，长沙斯塔克\",\n\t\t\"广东省\": {\n\t\t\t\"广州市\": \"看小蛮腰，喝早茶了嘛~\",\n\t\t\t\"深圳市\": \"今天你逛商场了嘛~\",\n\t\t\t\"阳江市\": \"阳春合水！博主家乡~ 欢迎来玩~\",\n\t\t\t\"其他\": \"来两斤福建人~\"\n\t\t},\n\t\t\"广西壮族自治区\": \"桂林山水甲天下\",\n\t\t\"海南省\": \"朝观日出逐白浪，夕看云起收霞光\",\n\t\t\"四川省\": \"康康川妹子\",\n\t\t\"贵州省\": \"茅台，学生，再塞200\",\n\t\t\"云南省\": \"玉龙飞舞云缠绕，万仞冰川直耸天\",\n\t\t\"西藏自治区\": \"躺在茫茫草原上，仰望蓝天\",\n\t\t\"陕西省\": \"来份臊子面加馍\",\n\t\t\"甘肃省\": \"羌笛何须怨杨柳，春风不度玉门关\",\n\t\t\"青海省\": \"牛肉干和老酸奶都好好吃\",\n\t\t\"宁夏回族自治区\": \"大漠孤烟直，长河落日圆\",\n\t\t\"新疆维吾尔自治区\": \"驼铃古道丝绸路，胡马犹闻唐汉风\",\n\t\t\"台湾省\": \"我在这头，大陆在那头\",\n\t\t\"香港特别行政区\": \"永定贼有残留地鬼嚎，迎击光非岁玉\",\n\t\t\"澳门特别行政区\": \"性感荷官，在线发牌\",\n\t\t\"其他\": \"带我去你的城市逛逛吧！\"\n\t},\n\t\"美国\": \"Let us live in peace!\",\n\t\"日本\": \"よろしく、一緒に桜を見ませんか\",\n\t\"俄罗斯\": \"干了这瓶伏特加！\",\n\t\"法国\": \"C'est La Vie\",\n\t\"德国\": \"Die Zeit verging im Fluge.\",\n\t\"澳大利亚\": \"一起去大堡礁吧！\",\n\t\"加拿大\": \"拾起一片枫叶赠予你\",\n\t\"其他\": \"带我去你的国家逛逛吧\"\n};\n\nconst getGreeting = (country, province, city) => {\n\tconst countryGreeting = greetings[country] || greetings[\"其他\"];\n\tif (typeof countryGreeting === 'string') {\n\t\treturn countryGreeting;\n\t}\n\tconst provinceGreeting = countryGreeting[province] || countryGreeting[\"其他\"];\n\tif (typeof provinceGreeting === 'string') {\n\t\treturn provinceGreeting;\n\t}\n\treturn provinceGreeting[city] || provinceGreeting[\"其他\"] || countryGreeting[\"其他\"];\n};\nconst getTimeGreeting = () => {\n\tconst hour = new Date().getHours();\n\tif (hour < 11) return \"早上好🌤️ ，一日之计在于晨\";\n\tif (hour < 13) return \"中午好☀️ ，记得午休喔~\";\n\tif (hour < 17) return \"下午好🕞 ，饮茶先啦！\";\n\tif (hour < 19) return \"即将下班🚶‍♂️，记得按时吃饭~\";\n\treturn \"晚上好🌙 ，夜生活嗨起来！\";\n};\n\nconst showErrorMessage = (message = '抱歉，无法获取信息') => {\n\tconst welcomeInfoElement = document.getElementById(\"welcome-info\");\n\twelcomeInfoElement.innerHTML = `\n        <div class=\"error-message\">\n            <div class=\"error-icon\">😕</div>\n            <p>${message}</p>\n            <p>请<i id=\"retry-button\" class=\"fa-solid fa-arrows-rotate\"></i>重试或检查网络连接</p>\n        </div>\n    `;\n\n\tdocument.getElementById('retry-button').addEventListener('click', fetchIpInfo);\n};\n\nconst isHomePage = () => {\n\treturn window.location.pathname === '/' || window.location.pathname === '/index.html';\n};\n\n// 初始化\ndocument.addEventListener('DOMContentLoaded', () => {\n\taddStyles();\n\tinsertAnnouncementComponent();\n\tdocument.addEventListener('pjax:complete', insertAnnouncementComponent);\n});"]}